package leetcode.editor.cn;

//ç»™å®šä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„çŸ©é˜µ mat ï¼Œè¯·è¾“å‡ºä¸€ä¸ªå¤§å°ç›¸åŒçš„çŸ©é˜µï¼Œå…¶ä¸­æ¯ä¸€ä¸ªæ ¼å­æ˜¯ mat ä¸­å¯¹åº”ä½ç½®å…ƒç´ åˆ°æœ€è¿‘çš„ 0 çš„è·ç¦»ã€‚ 
//
// ä¸¤ä¸ªç›¸é‚»å…ƒç´ é—´çš„è·ç¦»ä¸º 1 ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//
// 
//è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[0,0,0]]
//è¾“å‡ºï¼š[[0,0,0],[0,1,0],[0,0,0]]
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//
// 
//è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[1,1,1]]
//è¾“å‡ºï¼š[[0,0,0],[0,1,0],[1,2,1]]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// m == mat.length 
// n == mat[i].length 
// 1 <= m, n <= 104 
// 1 <= m * n <= 104 
// mat[i][j] is either 0 or 1. 
// mat ä¸­è‡³å°‘æœ‰ä¸€ä¸ª 0 
// 
// Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ 
// ğŸ‘ 464 ğŸ‘ 0

import java.util.Arrays;
import java.util.Deque;
import java.util.LinkedList;

public class Zero1Matrix{
    public static void main(String[] args) {
        Solution solution = new Zero1Matrix().new Solution();
        int[][] mat = {{0,0,0},{0,1,0},{0,0,0}} ;
        int[][] res = solution.updateMatrix(mat) ;
        for(int i = 0 ; i < res.length ; i++){
            System.out.println(Arrays.toString(res[i]));
        }
        
    }

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    /**
     * é¢˜ç›®ç»™å‡ºäº†å¤šä¸ª1ï¼Œè¦æ‰¾å‡ºæ¯ä¸ª1åˆ°0çš„æœ€è¿‘æ›¼å“ˆé¡¿è·ç¦»ã€‚ç”±äº1åˆ°0çš„è·ç¦»å’Œ0åˆ°1çš„è·ç¦»ä¸€æ ·çš„ï¼Œ
     * æ‰€ä»¥å…¶å®æˆ‘ä»¬å¯ä»¥æ¢ä¸ªæ€ç»´ï¼šæ‰¾å‡ºæ¯ä¸ª0åˆ°1çš„è·ç¦»ã€‚
     * å› æ­¤ï¼Œé¢˜ç›®å¯ä»¥æŠ½è±¡æˆï¼šå¤šä¸ªèµ·å§‹ç‚¹çš„BFSã€‚æ­å–œä½ å·²ç»è§£å†³äº†ä¸€åŠé—®é¢˜ã€‚
     * ä½†æ˜¯ï¼Œæ­¤æ—¶ä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ¢ä¸ªæ€ç»´ï¼Œä½†æ˜¯è¿™æ—¶å€™å°±éœ€è¦å¤šåˆ¤æ–­ï¼Œå¹¶ä¸èƒ½åªä¿®æ”¹mat[i][j] == 1,è¿™ä¼šæ›²è§£æ­¤ç®—æ³•
     *
     * é‚£ä¹ˆä¸ºä»€ä¹ˆä¸å¯ä»¥ä»1æ¥æ‰¾åˆ°0çš„æœ€è¿‘è·ç¦»ï¼Ÿ
     * å› ä¸ºbfsç›¸å½“äºæ»¡å¤©å¼€èŠ±ï¼Œå³å‘å¤–å±‚æ‰©å±•ï¼Œ
     * é‚£ä¹ˆæ­¤æ—¶å¦‚æœæ˜¯ä»1åˆ°0ï¼Œé‚£ä¹ˆæœ€é è¿‘1çš„å°±æ˜¯è·ç¦»æœ€å°çš„ï¼Œæœ€é è¿‘0çš„å°±æ˜¯è·ç¦»æœ€å¤§çš„
     * è¿™å’Œæˆ‘ä»¬çš„é¢˜æ„ä¸ç¬¦ï¼Œå³æˆ‘ä»¬çš„é¢˜æ„æ˜¯éœ€è¦ ä» mat ä¸­å¯¹åº”ä½ç½®å…ƒç´ åˆ°æœ€è¿‘çš„ 0 çš„è·ç¦»
     * ä½†æ˜¯æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™éœ€è¦åè¿‡æ¥dfsï¼Œå³æ¯ä¸ª0åˆ°1çš„è·ç¦»ã€‚è¿™æ ·æ¼«å¤©å¼€èŠ±åˆšå¥½å°±å¯ä»¥å¾—åˆ°
     * é è¿‘0çš„æ˜¯æœ€å°è·ç¦»ï¼Œé è¿‘1çš„æ˜¯æœ€å¤§è·ç¦»
     */
    /**
     * æ³¨æ„ï¼šåœ¨å›¾è§£ä¸­ï¼šæ¨¡æ‹Ÿå‡ºäº†ä¸€ä¸ªè¶…çº§0ï¼Œè¿æ¥ç€æ‰€æœ‰çš„0ï¼Œç„¶åè¿™æ‰€æœ‰çš„0å†ä¾æ¬¡å‘å¤–è¿æ¥å…¶ä»–å…ƒç´ ã€åˆšå¥½æ­¤æ—¶å°±ç¢°åˆ°äº†æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„å•æºbfsã€‘
     *
     * ä½†åœ¨å®é™…çš„é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸æ­¢ä¸€ä¸ª 0ã€‚æˆ‘ä»¬ä¼šæƒ³ï¼Œè¦æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº› 0 çœ‹æˆä¸€ä¸ªæ•´ä½“å¥½äº†ã€‚
     * æœ‰äº†è¿™æ ·çš„æƒ³æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªã€Œè¶…çº§é›¶ã€ï¼Œå®ƒä¸çŸ©é˜µä¸­æ‰€æœ‰çš„ 0 ç›¸è¿ï¼Œè¿™æ ·çš„è¯ï¼Œä»»æ„ä¸€ä¸ª 1 åˆ°å®ƒæœ€è¿‘çš„ 0 çš„è·ç¦»ï¼Œä¼šç­‰äºè¿™ä¸ª 1 åˆ°ã€Œè¶…çº§é›¶ã€çš„è·ç¦»å‡å»ä¸€ã€‚
     * ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªã€Œè¶…çº§é›¶ã€ï¼Œæˆ‘ä»¬å°±ä»¥å®ƒä¸ºèµ·ç‚¹è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚
     * è¿™ä¸ªã€Œè¶…çº§é›¶ã€åªå’ŒçŸ©é˜µä¸­çš„ 0 ç›¸è¿ï¼Œæ‰€ä»¥åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„ç¬¬ä¸€æ­¥ä¸­ï¼Œã€Œè¶…çº§é›¶ã€ä¼šè¢«å¼¹å‡ºé˜Ÿåˆ—ï¼Œè€Œæ‰€æœ‰çš„ 0 ä¼šè¢«åŠ å…¥é˜Ÿåˆ—ï¼Œ
     * æ³¨æ„ï¼šè¶…çº§é›¶ã€ä¼šè¢«å¼¹å‡ºé˜Ÿåˆ— è¿™åªæ˜¯æˆ‘ä»¬è¿›è¡Œæƒ³è±¡å‡ºçš„ä¸€ä¸ªåœºæ™¯ï¼Œå…¶å®æ˜¯è™šæ„çš„ï¼Œä½†è¿™å¯¹è§£é¢˜å¤§æœ‰å¸®åŠ©
     * å®ƒä»¬åˆ°ã€Œè¶…çº§é›¶ã€çš„è·ç¦»ä¸º 1ã€‚è¿™å°±ç­‰ä»·äºï¼šä¸€å¼€å§‹æˆ‘ä»¬å°±å°†æ‰€æœ‰çš„ 0 åŠ å…¥é˜Ÿåˆ—ï¼Œå®ƒä»¬çš„åˆå§‹è·ç¦»ä¸º0ã€‚
     * è¿™æ ·ä»¥æ¥ï¼Œåœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¯é‡åˆ°ä¸€ä¸ª 1ï¼Œå°±å¾—åˆ°äº†å®ƒåˆ°ã€Œè¶…çº§é›¶ã€çš„è·ç¦»å‡å»ä¸€ï¼Œä¹Ÿå°±æ˜¯ è¿™ä¸ª 1 åˆ°æœ€è¿‘çš„ 0 çš„è·ç¦»ã€‚
     */
    // åˆ©ç”¨bfså¹¿åº¦ä¼˜å…ˆéå†ï¼Œ
    // ç½—åˆ—å‡º ä¸Šä¸‹å·¦å³çš„å•ä½ä¸º1 çš„ä½ç§»ï¼Œåœ¨äºŒç»´æ•°ç»„ä¸­ã€å³ç›¸å½“äºx-yè½´çš„åæ ‡ã€‘
    // private int[][] dirs = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};
    // æ­¤å¤„å®šä¹‰ä¸¤ä¸ªä¸€ç»´æ•°ç»„ï¼Œä¾æ¬¡ä¿å­˜ç€å¯¹åº”ä¸Šä¸‹å·¦å³çš„å•ä½x,yåæ ‡
    // è¿™æ ·åœ¨åé¢å‘å››å‘¨æ‰©å±•æ—¶å€™ï¼Œå˜é‡çœ‹ç€å¾ˆé†’ç›®
    private int[] dx = new int[] {-1, 1, 0, 0};
    private int[] dy = new int[] {0, 0, -1, 1};

    /**
     *
     * @param mat   æ³¨æ„ï¼šäºŒç»´æ•°ç»„æ„æˆçš„çŸ©é˜µmat å­˜å‚¨çš„ æ¯ä¸ªä¸€ç»´æ•°ç»„ çš„å…ƒç´  å…¶å®æ˜¯ å¯¹åº”çš„ x,yåæ ‡
     *                  ä½†æ­¤æ—¶ m>x>=0,n>y>=0,ä¸ºäº†é¿å…ä¸‹æ ‡è¶Šç•Œ
     * @return
     */
    public int[][] updateMatrix(int[][] mat) {
        int m = mat.length ;
        int n = mat[0].length ;
        int[][] distance = new int[m][n] ;  // è·ç¦»çŸ©é˜µ
        // å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ¥è®°å½•æ˜¯å¦å·²ç»éå†è¿‡å½“å‰ç‚¹ï¼Œé¿å…é‡å¤éå†
        boolean[][] isVisited = new boolean[m][n] ; // é»˜è®¤å€¼ä¸ºfalse
        // æ­¤é˜Ÿåˆ—ä¸­æ¯ä¸ª ä¸€ç»´æ•°ç»„éƒ½æ˜¯å­˜æ”¾ç€ matçŸ©é˜µ ä¸­ 0 çš„åæ ‡
        Deque<int[]> queue = new LinkedList<>() ;   // å®šä¹‰ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—çš„æ¥å£ï¼Œå®ç°ç±»æ˜¯åŒå‘å¾ªç¯é“¾è¡¨

        // å°†æ‰€æœ‰çš„ 0 æ·»åŠ è¿›åˆå§‹é˜Ÿåˆ—ä¸­
        for(int i = 0 ; i < m ; i++){
            for(int j = 0 ; j < n ; j++){
                if(mat[i][j] == 0){
                    // åˆ™å°†æŒ‡å®šå…ƒç´ æ’å…¥æ­¤åŒç«¯é˜Ÿåˆ—è¡¨ç¤ºçš„é˜Ÿåˆ—ä¸­
                    queue.offer(new int[]{i,j}) ;   // æ­¤å¤„æ’å…¥ä¸€ç»´æ•°ç»„
                    isVisited[i][j] = true ;    // ä¾æ¬¡å°†æ¯ä¸€ä¸ª0æ ‡è®°ä¸ºå·²ç»è®¿é—®ï¼Œå› ä¸º0å°±æ˜¯èµ·å§‹ç‚¹ã€å¤šæºç‚¹ã€‘
                }
            }
        }

        // å¹¿åº¦ä¼˜å…ˆéå† bfsï¼Œæˆ‘è¦ä¸€å±‚ä¸€å±‚çš„å‰¥å¼€ä½ çš„å¿ƒ
        while(!queue.isEmpty()){
            // æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰å¯¹çŸ©é˜µæ˜¯å¦å·²ç»å…¨éƒ¨éå†ç»“æŸè¿›è¡Œåˆ¤æ–­ï¼Œæ•…è¿™é‡Œè¿˜ä¼šå‡ºç°ä¸€äº›å†—ä½™çš„ä»£ç 
            // å³è™½ç„¶å·²ç»å…¨éƒ¨éå†ç»“æŸäº†ï¼Œä½†æ˜¯é˜Ÿåˆ—å¯èƒ½è¿˜æ˜¯ä¸ä¸ºç©ºï¼š !queue.isEmpty()
            // ä½†å¦‚æœè¿›è¡Œåˆ¤æ–­äº†ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡whileå¾ªç¯éƒ½è¦ç»è¿‡è¿™ä¸ªäºŒé‡forå¾ªç¯ï¼Œé‚£ä¹ˆä»£ç çš„æ‰§è¡Œæ•ˆç‡æ˜¾ç„¶å°±å¾—ä¸å¿å¤±äº†

            // æ£€ç´¢å¹¶ç§»é™¤æ­¤åŒç«¯é˜Ÿåˆ—è¡¨ç¤ºçš„é˜Ÿåˆ—çš„å¤´éƒ¨ï¼ˆæ¢å¥è¯è¯´ï¼Œæ­¤åŒç«¯é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰
            // cell ï¼šä»£è¡¨ç»†èƒï¼Œä¸€å°ä¸ªèœ‚å·¢
            // å…¶å®å¼¹å‡ºèŠ‚ç‚¹ï¼Œå°±æ˜¯è¦è¿›è¡Œå¤„ç†
            int[] cell = queue.poll() ;
            // ä¸‹é¢çš„i å’Œ j ä»£è¡¨ å¾…å¤„ç†çš„ 0ã€åˆšå¼€å§‹ä½äºæœ€å·¦ä¸Šè§’ã€‘ å¯¹åº” çš„ x,yåæ ‡
            int i = cell[0] ;
            int j = cell[1] ;
            // è¿™é‡Œç›¸å½“äºå¾€å››ä¸ªæ–¹å‘è¿›è¡Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œbfs
            // æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ç”¨åˆ°é€’å½’çš„æ€æƒ³ï¼Œå³æ²¡æœ‰æ ˆçš„æ€æƒ³ï¼Œå› ä¸ºè¿™æ˜¯bfsï¼Œä¸æ˜¯dfs
            // è€Œä¸”æ­¤å¤„çš„forå¾ªç¯å¯¹äºï¼Œæ¯å¼¹å‡ºé˜Ÿåˆ—å¤´éƒ¨çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªä¼šå‘å¤–æ‰©å±•ä¸€å±‚
            // å¦‚æœæ­¤æ—¶å¼¹å‡ºçš„èŠ‚ç‚¹å¯¹åº”çŸ©é˜µä¸­çš„å…ƒç´ æ˜¯0ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºè¿˜æ˜¯åœ¨ç¬¬ä¸€å±‚ä¸­æœç´¢
            // ä¸Šé¢çš„queue.poll()æ–¹æ³•å¼¹å‡ºçš„æ˜¯é˜Ÿåˆ—å¤´éƒ¨ä¸­çš„é0å€¼å¯¹åº”çš„ç‚¹ï¼Œé‚£ä¹ˆå°±åœ¨éå†ç¬¬äºŒå±‚
            for(int d = 0 ; d < 4 ; d++){
                // æ­¤å¤„çš„ni ä»£è¡¨ åŠ ä¸Š å•ä½ä½ç§» å çš„ xåæ ‡
                int ni = i + dx[d] ; //int ni = i + dirs[d][0] ;
                // æ­¤å¤„çš„nj ä»£è¡¨ åŠ ä¸Š å•ä½ä½ç§» å çš„ yåæ ‡
                int nj = j + dy[d] ; //int nj = j + dirs[d][1] ;
                // ä¸‹é¢çš„ ni >= 0 && ni < m && nj >= 0 && nj < n æ¡ä»¶ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿è¾¹ç•Œä¸ä¼šè¶…å‡º
                // !isVisited[ni][nj]æ¡ä»¶ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿ï¼Œè¿˜æ²¡æœ‰éå†åˆ°çš„ç‚¹å¯ä»¥è¿›è¡Œæ·»åŠ ï¼Œ
                // æ³¨æ„ï¼šè¿™é‡Œæ’é™¤äº†åŒ…å«0çš„ å¤šæºç‚¹ çš„åæ ‡ï¼Œæ•…å¦‚æœåˆšå¥½éå†åˆ°ï¼Œå°±ä¸ä¼šæ‰§è¡Œæ­¤å¤„çš„ifè¯­å¥
                if(ni >= 0 && ni < m && nj >= 0 && nj < n && !isVisited[ni][nj]){
                    distance[ni][nj] = distance[i][j] + 1 ; // å°†éå†åˆ°çš„ç‚¹ çš„ æƒå€¼ ç›¸è¾ƒäºå†…å±‚çš„ æƒå€¼ + 1
                    // ä¸‹é¢è¿™ä¸€æ­¥æ˜¯ å°† åˆšæ‰ ç¬¦åˆä¸Šé¢çš„ifè¯­å¥çš„æ¡ä»¶ éå†åˆ°çš„ç‚¹ æ·»åŠ åˆ° é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œ
                    // ä»¥ä¾¿äºï¼Œä¸‹ä¸€æ¬¡ç»§ç»­forå¾ªç¯è¿›è¡Œbfs å±‚æ¬¡æœç´¢ï¼Œç›´åˆ°åœ¨å½“å‰0çš„æ‰€æœ‰çš„1éƒ½è®¿é—®å®Œæ¯•åï¼Œæ‰é€€å‡º
                    queue.offer(new int[]{ni,nj}) ; // å°†æ­¤æ—¶ç¬¦åˆæ¡ä»¶çš„ç‚¹ æ·»åŠ åˆ° åŒç«¯é˜Ÿåˆ—çš„å°¾éƒ¨
                    isVisited[ni][nj] = true ;  // æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œæ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦æ¢å¤ç°åœºï¼Œæ²¡æœ‰åˆ©ç”¨åˆ°å›æº¯
                }
            }
        }

        return distance ;
    }
}
//leetcode submit region end(Prohibit modification and deletion)

}

