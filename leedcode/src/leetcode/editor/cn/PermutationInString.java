package leetcode.editor.cn;

//ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² s1 å’Œ s2 ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ s2 æ˜¯å¦åŒ…å« s1 çš„æ’åˆ—ã€‚ 
//
// æ¢å¥è¯è¯´ï¼Œs1 çš„æ’åˆ—ä¹‹ä¸€æ˜¯ s2 çš„ å­ä¸² ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šs1 = "ab" s2 = "eidbaooo"
//è¾“å‡ºï¼štrue
//è§£é‡Šï¼šs2 åŒ…å« s1 çš„æ’åˆ—ä¹‹ä¸€ ("ba").
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šs1= "ab" s2 = "eidboaoo"
//è¾“å‡ºï¼šfalse
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= s1.length, s2.length <= 104 
// s1 å’Œ s2 ä»…åŒ…å«å°å†™å­—æ¯ 
// 
// Related Topics å“ˆå¸Œè¡¨ åŒæŒ‡é’ˆ å­—ç¬¦ä¸² æ»‘åŠ¨çª—å£ 
// ğŸ‘ 396 ğŸ‘ 0

public class PermutationInString{
    public static void main(String[] args) {
        Solution solution = new PermutationInString().new Solution();
        String s1 = "aab" ;
        String s2 = "aamabaao" ;
        System.out.println(solution.checkInclusion(s1, s2));
    }

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    /**
     *  è¯·å¤§å®¶ç‰¹åˆ«ç•™æ„ winCount çš„å«ä¹‰ï¼š
     *  æ»‘åŠ¨çª—å£ä¸­çš„å­—ç¬¦è¦æ»¡è¶³å­—ç¬¦å‡ºç°çš„æ¬¡æ•° ç­‰äº s1 ä¸­å¯¹åº”å­—ç¬¦å‡ºç°çš„æ¬¡æ•°çš„æ—¶å€™æ‰åŠ  1ï¼Œ
     *  winCount ä¸ä»…ç»Ÿè®¡äº†ç§ç±»ï¼Œè¿˜ä»£è¡¨äº†æ¬¡æ•°ã€‚ä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡ winCount çš„æ•°å€¼å»äº†è§£æ•´ä¸ªæ»‘åŠ¨çª—å£çš„ä¿¡æ¯
        ä½†è¦è°¨è®°ä¸€ç‚¹çš„æ˜¯ï¼šå¦‚æœ æ»‘åŠ¨çª—å£ä¸­çš„å­—ç¬¦è¦æ»¡è¶³å­—ç¬¦å‡ºç°çš„æ¬¡æ•° å¤§äº s1 ä¸­å¯¹åº”å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œæ­¤æ—¶å…ˆä¸åšå¤„ç†ï¼Œåœ¨
        while(pCount == winCount){}å¾ªç¯ä¸‹æ‰è¿›è¡Œåˆ¤æ–­ï¼Œ
     */
    // åˆ©ç”¨æ»‘åŠ¨çª—å£çš„æ€æƒ³ï¼Œä»¥åŠå­˜å‚¨å­—ç¬¦çš„å­—å…¸æ•°ç»„ã€Javaé‡Œé¢ç›´æ¥æ²¡æœ‰è‡ªå·±ã€‘ï¼Œå°±è‡ªå·±ç»´æŠ¤ä¸€ä¸ªå¾…åŒ¹é…çš„å­—ç¬¦ä¸²çš„é¢‘æ•°æ•°ç»„
    public boolean checkInclusion(String s1, String s2) {

        char[] pattern = s1.toCharArray() ; // å¾…åŒ¹é…çš„å­—ç¬¦æ•°ç»„
        char[] text = s2.toCharArray() ;    // åŸå§‹çš„å­—ç¬¦æ•°ç»„

        int pLen = pattern.length ; // å¾…åŒ¹é…çš„å­—ç¬¦æ•°ç»„çš„é•¿åº¦
        int tLen = text.length ;    // åŸå§‹çš„å­—ç¬¦æ•°ç»„çš„é•¿åº¦

        // ç»´æŠ¤ä¸€ä¸ªå­—ç¬¦æ•°ç»„pattern åœ¨26ä¸ªå°å†™å­—æ¯çš„æ•°ç»„ã€ä¹Ÿå¯ä»¥ç”¨å“ˆå¸Œè¡¨ã€‘ä¸­å¯¹åº”å…ƒç´ åœ¨ç´¢å¼•å€¼ä¸º0~25èŒƒå›´ä¸‹å‡ºç°çš„æ¬¡æ•°
        // è¿™é‡Œåƒä¸‡ä¸è¦å†™æˆ new int[pLen]ï¼Œå› ä¸ºæˆ‘ä»¬ patternFrequency æ˜¯éœ€è¦å’Œ text æ•°ç»„è¿›è¡Œæ¯”è¾ƒï¼Œè€Œtextæ•°ç»„å­˜åœ¨a~zçš„å­—ç¬¦ï¼Œ
        // æ•…å¦‚æœå†™æˆä¸Šé¢çš„ï¼Œä¼šé€ æˆä¸‹æ ‡è¶Šç•Œ
        int[] patternFrequency = new int[26] ;
        for(int i = 0 ; i < pLen ; i++){
            patternFrequency[pattern[i] - 'a']++ ;  // æ­¤æ•°ç»„ä¿å­˜ å¾…åŒ¹é…çš„å­—ç¬¦æ•°ç»„ pattern å¯¹åº”å…ƒç´ åœ¨ç´¢å¼•å€¼ä¸º 0~25ã€å³26ä¸ªå­—æ¯ã€‘ èŒƒå›´ä¸‹å‡ºç°çš„æ¬¡æ•°
        }

        // åˆ›å»ºä¸€ä¸ªæ»‘åŠ¨çª—å£æ¥å®ç°ç§»åŠ¨ï¼Œæ³¨æ„ï¼šæ­¤æ—¶çš„æ»‘åŠ¨çª—å£é‡Œé¢ä»…ä»…æ˜¯ä¿å­˜ç€å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œ
        int[] windowFrequency = new int[26] ;    // è™½ç„¶è¿™é‡Œæˆ‘ä»¬åˆå§‹åŒ–äº†26ä¸ªintç±»å‹çš„æ•°ç»„ï¼Œä½†å®é™…ä¸Šä½¿ç”¨çš„åªæ˜¯pLen
        // å®šä¹‰ä¸€ä¸ªåŒæŒ‡é’ˆï¼Œè¿›è¡Œç§»åŠ¨çª—å£,æ³¨æ„ï¼šæ­¤çª—å£çš„å¤§å°åˆšå¼€å§‹è¿˜æ²¡æœ‰è¶‹äºå›ºå®šçŠ¶æ€ï¼Œæ•…éœ€è¦å…ˆè¿›è¡ŒåŠ¨æ€ç§»åŠ¨ä¸ºä¸€ä¸ª
        int left = 0 ;
        int right = 0 ;
        // å½“æ»‘åŠ¨çª—å£ä¸­çš„æŸä¸ªå­—ç¬¦ä¸ªæ•° ä¸ s1 ä¸­å¯¹åº”ç›¸ç­‰çš„æ—¶å€™æ‰è®¡æ•°
        int winCount = 0 ;

        // å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè®°å½• pattern æ•°ç»„ä¸­ å­—ç¬¦ ä¸€å…±å‡ºç°çš„ å­—ç¬¦ç§ç±»
        int pCount = 0 ;
        for (int i = 0 ; i < 26 ; i++){
            if(patternFrequency[i] > 0){
                pCount++ ;
            }
        }


        while(right < tLen){

            // æ­¤æ¡ä»¶æˆç«‹ï¼Œè¯´æ˜åœ¨rightæŒ‡é’ˆéå†åˆ°çš„å­—ç¬¦ï¼Œå³ä¸º s1ä¸­å­˜åœ¨çš„å­—ç¬¦
            if(patternFrequency[text[right] - 'a'] > 0){
                windowFrequency[text[right] - 'a']++ ;  // å°†å¯¹åº”çš„ å­—ç¬¦çš„ é¢‘æ•°ï¼ˆæ¬¡æ•°ï¼‰ +1
                // å½“æ»‘åŠ¨çª—å£ä¸­å‡ºç°çš„å­—ç¬¦ç§ç±»æ•°å’Œ s1 ä¸­å‡ºç°çš„å­—ç¬¦ç§ç±»æ•°ç›¸ç­‰ï¼ˆæ ¹æ® winCount çš„å®šä¹‰ï¼Œå¯¹åº”æ¬¡æ•°ä¹Ÿç›¸ç­‰ï¼‰ï¼Œ

                // å¦‚æœæŸä¸€ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°æ°å¥½ç­‰äº s1 ä¸­å¯¹åº”å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼ŒwinCount += 1
                // åˆ‡è®°ï¼šå¦‚æœæŸä¸€ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°å¤§äº s1 ä¸­å¯¹åº”å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆæ­¤æ—¶é¢‘æ•°å°±æ¯” s1çš„è¦å¤šï¼Œ
                // é‚£ä¹ˆæ­¤æ—¶ä¹Ÿä¸ä¼šæœ‰å½±å“ï¼Œåç»­çš„whileå¾ªç¯ä¸­ä¼šå¯¹æ­¤æ¡ä»¶è¿›è¡Œå‰”é™¤
                if(windowFrequency[text[right] - 'a'] == patternFrequency[text[right] - 'a']){
                    winCount++ ;
                }
            }
            // æ­¤è¯­å¥ æ— è®ºä¸Šé¢çš„ifè¯­å¥æ˜¯å¦æˆç«‹éƒ½ä¼šç»§ç»­ç§»åŠ¨æ‰§è¡Œ
            right++ ;   // rightæŒ‡é’ˆå‘å³ç»§ç»­éå†

            // å½“æ»‘åŠ¨çª—å£ä¸­å‡ºç°çš„å­—ç¬¦ç§ç±»æ•°å’Œ s1 ä¸­å‡ºç°çš„å­—ç¬¦ç§ç±»æ•°ç›¸ç­‰ï¼ˆæ ¹æ® winCount çš„å®šä¹‰ï¼Œå¯¹åº”æ¬¡æ•°ä¹Ÿç›¸ç­‰ï¼‰ï¼Œ

            // ç§»åŠ¨leftæŒ‡é’ˆæ˜¯è¦åœ¨å·²ç»æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œç„¶åå†è¿›è¡Œç¼©å‡æ»‘åŠ¨çª—å£ï¼Œç›´åˆ°ä¸‹é¢çš„right - left == pLen
            // ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š
            // 1.å¦‚æœ ä¸æ»¡è¶³ pCount == winCountï¼Œåˆ™å°±ä¸éœ€è¦ç§»åŠ¨leftæŒ‡é’ˆ
            // 2.å¦‚æœ æ»¡è¶³ pCount == winCountï¼Œå¯èƒ½åˆšå¥½æ‰¾åˆ°ï¼Œè¿”å›ï¼›å¦åˆ™å…¶ä»–æƒ…å†µä¸‹éƒ½éœ€è¦ç§»åŠ¨leftæŒ‡é’ˆ
            while(pCount == winCount){

                // å¹¶ä¸” s2 ä¸Šçš„æ»‘åŠ¨çª—å£çš„é•¿åº¦ç­‰äºå­—ç¬¦ä¸² s1 çš„é•¿åº¦çš„æ—¶å€™ï¼Œå°±æ‰¾åˆ°äº† s1 çš„ä¸€ä¸ªæ’åˆ—
                // ä¸ºä»€ä¹ˆåˆ¤æ–­æ¡ä»¶æ˜¯right - left == pLenï¼Œè€Œä¸æ˜¯right - left + 1ï¼Œ
                // å› ä¸ºä¸Šé¢çš„ä»£ç æ‰§è¡Œç»“æŸåï¼Œright++ï¼Œä½†æ˜¯æ­¤æ—¶çš„rightå¹¶æ²¡æœ‰å‚ä¸åˆ°ä¸‹é¢çš„è®¡ç®—ï¼Œåªæ˜¯æŒ‡å‘äº†ä¸‹ä¸€ä¸ªä½ç½®
                // æˆ‘ä»¬è¿™é‡Œåˆ¤æ–­ï¼Œåˆ©ç”¨ä¸‹æ ‡çš„å‡æ³•ï¼Œåˆšå¥½å¯ä»¥æŠµæ¶ˆ1ä¸ª 1 ï¼Œæ•…å¯ä»¥å½¢è±¡çš„çœ‹æˆ (right - 1) - left + 1
                if((right - 1) - left + 1 == pLen){
                    return true ;
                }

                // å¦‚æœæ­¤æ—¶ leftæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´  åœ¨ pattern ä¸­å‡ºç°,åˆ™éœ€è¦  å°†å¯¹åº”çš„ å­—ç¬¦çš„ é¢‘æ•°ï¼ˆæ¬¡æ•°ï¼‰ -1
                // ä¸ºä»€ä¹ˆè¦è¿™æ ·å­ï¼Œwhyï¼Ÿï¼Ÿï¼Ÿ
                // 1.æ­¤æ—¶æ˜¯ä¸ºäº†å‰”é™¤ä¸è¿ç»­çš„å­—ç¬¦ã€æ³¨ï¼šå‰”é™¤ä¹‹åå¯èƒ½ä¼šé€ æˆwinCount--ï¼Œä¹Ÿå¯èƒ½winCountä¸å—å½±å“ï¼Œè¿™æ˜¯å–å†³äºpatternFrequencyçš„é¢‘æ•°ã€‘
                // 2.æ­¤æ—¶å¦‚æœä¹‹å‰patternä¸­çš„ç§ç±»æ•°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ­¤æ—¶æŸäº›å­—ç¬¦çš„é¢‘æ•°å¤§äº pattern ï¼Œé‚£ä¹ˆå°±éœ€è¦å‰”é™¤
                // ä¸Šé¢çš„è¿™ä¸¤ç§æƒ…å†µå…¶å®æ˜¯ç›¸äº’è¡”æ¥çš„ï¼Œä¸€ä¸ªæœ‰å‡ºç°éƒ½ä¼šé€ æˆ ä¸èƒ½åŒ¹é…ä¸Š
                // æ‰€ä»¥éœ€è¦ç§»åŠ¨å·¦è¾¹ç•Œæ»‘åŠ¨çª—å£çš„leftæŒ‡é’ˆï¼Œç»§ç»­æœç´¢
                if(patternFrequency[text[left] - 'a'] > 0){
                    windowFrequency[text[left] - 'a']-- ;
                    if(windowFrequency[text[left] - 'a'] < patternFrequency[text[left] - 'a']){
                        winCount-- ;
                    }
                }
                // æ­¤è¯­å¥ æ— è®ºä¸Šé¢çš„ifè¯­å¥æ˜¯å¦æˆç«‹éƒ½ä¼šç»§ç»­ç§»åŠ¨æ‰§è¡Œ
                // å¦‚æœå¯¹åº”çš„patternFrequencyçš„é¢‘æ•° ä¸º0ï¼Œè¯´æ˜æ­¤å­—ç¬¦ä¸ºæ— æ•ˆ åŒ¹é…ï¼Œåˆ™ä¹Ÿéœ€è¦ç§»åŠ¨leftæŒ‡é’ˆ
                // åˆ‡è®°ï¼šå¦‚æœæ­¤æ—¶çš„leftæŒ‡é’ˆå‘å³ç§»åŠ¨åï¼Œè¿˜æ˜¯æ»¡è¶³pCount == winCountï¼Œåˆ™ä¸ä¼šè·³å‡ºå¾ªç¯
                left++ ;
            }
        }
        return false ;

    }
}
//leetcode submit region end(Prohibit modification and deletion)

}

