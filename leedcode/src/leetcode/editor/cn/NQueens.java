package leetcode.editor.cn;

//n çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚ 
//
// ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚ 
//
// 
// 
// æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ n çš‡åé—®é¢˜ çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ 'Q' å’Œ '.' åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šn = 4
//è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
//è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š
//
// 
//è¾“å…¥ï¼šn = 1
//è¾“å‡ºï¼š[["Q"]]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= n <= 9 
// çš‡åå½¼æ­¤ä¸èƒ½ç›¸äº’æ”»å‡»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šä»»ä½•ä¸¤ä¸ªçš‡åéƒ½ä¸èƒ½å¤„äºåŒä¸€æ¡æ¨ªè¡Œã€çºµè¡Œæˆ–æ–œçº¿ä¸Šã€‚ 
// 
// 
// 
// Related Topics æ•°ç»„ å›æº¯ 
// ğŸ‘ 1002 ğŸ‘ 0

import java.util.ArrayList;
import java.util.List;

public class NQueens{

    // æ³¨æ„ï¼šè¿™é‡Œæ˜¯è¯´å½¼æ­¤é—´çš„çš‡åä¸èƒ½æ”»å‡»ï¼Œå³åœ¨é€’å½’æ ‘ä¸­çš„æ¯ä¸€å±‚å¤„éƒ½å¿…é¡»æ»¡è¶³ï¼š
    //      ä»»ä½•ä¸¤ä¸ªçš‡åéƒ½ä¸èƒ½å¤„äºåŒä¸€æ¡æ¨ªè¡Œã€çºµè¡Œæˆ–æ–œçº¿ä¸Šã€‚ 
    public static void main(String[] args) {
        Solution solution = new NQueens().new Solution();
        solution.solveNQueens(4) ;
    }

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {

    // æ­¤å¤„å¥½åƒæ— æ³•ä½¿ç”¨ä¸€ç»´æ•°ç»„æ¥ç®—ï¼Œå³æ— æ³•ç”¨ä¸€ç»´æ•°ç»„æ¥å­˜å‚¨æ¯ç§çš‡åçš„æ‘†æ³•
    // å¦å¤–ä¸€ç§åšæ³•æ˜¯å°†nä¸ªçš‡åæ‘†æ”¾åˆ°äºŒç»´æ•°ç»„ä¸­ï¼Œç„¶åå°†æ¯ä¸ªä¸€ç»´æ•°ç»„ä»¥Stringçš„å½¢å¼ä¿å­˜åˆ°resä¸­
    // ä½†æ˜¯æˆ‘çœ‹äº†ä¸€é“é¢˜ç›®çš„åšæ³•ï¼Œåˆå¯ä»¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘è¯•è¯•
    public List<List<String>> solveNQueens(int n) {

        List<List<String>> res = new ArrayList<>() ;

        // ä¸»è¦æ˜¯ä¿å­˜å¯¹åº”è¡Œä¸‹çš„çš‡åçš„ä½ç½®
        // æ³¨æ„ï¼šè¿™é‡Œçš„ç´¢å¼•å€¼ä»£è¡¨çš„æ˜¯è¡Œï¼Œå…ƒç´ å€¼ä»£è¡¨çš„æ˜¯åˆ—å€¼
        int[] queen_pos = new int[n] ;

        // è¿™é‡Œä½¿ç”¨åˆ°ä¸€ä¸ªlistæ¥ä¿å­˜æ¯ä¸€è¡Œçš„Qå’Œ.çš„Stringä¿¡æ¯ï¼Œå°†å…¶ä¿å­˜åˆ°ä¸€ç»´é›†åˆä¸­
        List<String> list = new ArrayList<>() ;

        dfs(res,queen_pos,n,0,list) ;

        return res ;


    }

    private void dfs(List<List<String>> res, int[] queen_pos, int n, int row, List<String> list) {

        if(row >= n){

            for(int i = 0 ; i < n ; i++){   // iï¼šä»£è¡¨è¡Œæ ‡
                StringBuffer sb = new StringBuffer() ;
                for(int j = 0 ; j < n ; j++){   // jï¼šä»£è¡¨åˆ—æ ‡
                    if(queen_pos[i] == j){  // åˆ¤æ–­å½“å‰éå†åˆ°çš„å…ƒç´ çš„å€¼æ˜¯å¦å’Œ åˆ—ç´¢å¼•ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™è¯´æ˜è¿™æ˜¯æˆ‘ä»¬æ‰¾åˆ°çš„çš‡å
                        sb.append('Q') ;
                    }else{
                        sb.append('.') ;
                    }
                }
                list.add(sb.toString()) ;
            }
            res.add(list) ;
            list.clear();   // æ¸…ç©ºlist
        } else{
            // è¯´æ˜è¿˜æ²¡æœ‰æ‘†å®Œæœ€åä¸€ä¸ªçš‡å
            // è¿™é‡Œçš„iä»£è¡¨åˆ—çš„ä¿¡æ¯
            for(int i = 0 ; i < n ; i++){
                queen_pos[row] = i ;    // å‡è®¾å¯ä»¥æ·»åŠ æ­¤çš‡åï¼Œiä»£è¡¨åˆ—æ•°ï¼Œå°†æ‰€åœ¨çš„åˆ—ç´¢å¼•ä½œä¸ºå…ƒç´ å€¼
                // åˆ¤æ–­å½“æ”¾ç½®ç¬¬rowä¸ªçš‡ååˆ°iåˆ—æ—¶ï¼Œæ˜¯å¦å†²çª
                if(judge(row,queen_pos)){
                    dfs(res, queen_pos, n, row + 1, list);
                }

                // å†²çªï¼Œå°±ç»§ç»­å¾ªç¯i+1ï¼Œ x[row] = i ; å³å°†ç¬¬rowä¸ªçš‡åï¼Œæ”¾ç½®åœ¨æœ¬è¡Œçš„åä¸€ä¸ªåˆ—ä½ç½®
                continue ;    // åŠ ä¸Šè¿™ä¸€è¡Œï¼Œä¸»è¦æ˜¯å¯ä»¥æ¸…æ™°çš„æ˜ç™½è¦è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œæ‰¾ç¬¬rowä¸ªçš‡åçš„ï¼Œç¬¬iåˆ—çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œå›æº¯ã€‚
            }
        }


    }

    private boolean judge(int row, int[] queen_pos) {

        for(int i = row - 1 ; i >= 0 ; i--){

            if(queen_pos[row] == queen_pos[i] || Math.abs(row - i) == Math.abs(queen_pos[row] - queen_pos[i])){
                return false ;
            }
        }

        return true ;
    }


}
//leetcode submit region end(Prohibit modification and deletion)

}

